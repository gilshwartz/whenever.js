<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
                    "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <link rel="stylesheet" href="qunit.css" type="text/css" media="screen" />
  <script type="text/javascript" src="qunit.js"></script>
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="../whenever.js"></script>
  
  <script type="text/javascript" charset="utf-8">
  
    whenever.definitions.add({
      'Click Me!': 'a#click-me',
      'Click Me Too!': 'a#click-me-too',
      'Focus Me!': 'input#focus-me'
    })
    
    whenever.actions.add({
      'Change the text to "Clicked!"': function(){
        $(this).text('Clicked!')
      },
      'Change the value to "([^"]*)"': function(value){
        $(this).val(value)
      }
    })
    
    whenever.conditions.add({
      'one is two': function(){
        return 1 == 2
      }
    })
  
    whenever('Click Me!').is('clicked').then('Change the text to "Clicked!"')
    whenever('Focus Me!').is('focussed').then('Change the value to "Focussed!"')
    whenever('Focus Me!').is('blurred').then('Change the value to "Blurred!"')
    whenever('Click Me Too!')
      .is('clicked')
      .given('one is two')
      .then('Change the text to "Clicked!"')
  
    module("Whenever")
    test("click", function(){
      var link = $('a#click-me')
      link.trigger('click')
      equals(link.text(), 'Clicked!')
    })
    
    test("focus", function(){
      var input = $('input#focus-me')
      input.trigger('focus')
      equals(input.val(), 'Focussed!')
    })
    
    test("blur", function(){
      var input = $('input#focus-me')
      input.trigger('blur')
      equals(input.val(), 'Blurred!')
    })
    
    test("simple if", function(){
      var link = $('a#click-me-too')
      link.trigger('click')
      equals(link.text(), 'Click Me Too!')
    })

  </script>
</head>
<body>
  <h1 id="qunit-header">Whenever Tests</h1>
  <h2 id="qunit-banner"></h2>
  <h2 id="qunit-userAgent"></h2>
  <ol id="qunit-tests"></ol>
</body>

<a id="click-me">Click Me!</a>
<a id="click-me-too">Click Me Too!</a>
<input id="focus-me" type="text" name="focus-me" value="Focus Me!">

</html>